<!DOCTYPE html>
<html lang="en" xmlns:http="http://www.w3.org/1999/xhtml">
	<head>
		<meta charset="UTF-8">
		<title>Profile</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.js"></script>
        <script src="{{ url_for('static', filename='register.js') }}"></script>
    </head>
	<body>
        <header>
            <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top">
                <span style="font-size: 3em; color: white;">
                    <i class="fas fa-chess-bishop"></i>
                </span>
                <a class="navbar-brand abs" href="/dashboard">AlmostMatters</a>
                <div class="navbar-collapse collapse" id="collapsingNavbar">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-4" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user"></i> {{ current_user.screen_name }} </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-info" aria-labelledby="navbarDropdownMenuLink-4">
                                <a class="dropdown-item" href="/dashboard">Back</a>

                                <a class="dropdown-item" href="#">Settings</a>
                                <a class="dropdown-item" href="/logout">Log out</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
      
        <div class="container-fluid">
                  <div class="user-info" style="float: none; margin: 0 auto; width: 75%;">
                   
                      <div class="profile-pic"><img src="https://s3.us-east-2.amazonaws.com/almostmatters/profile_avatar.jpg" width="20%" class="rounded-circle"/>

                      <div class="layer">
                        <div class="loader"></div>
                        <p>Update Profile Picture:</p>
                      </div><a class="image-wrapper" href="#">
                        <form id="profilePictureForm" action="/upload_file" method="POST"></form>
                          <input class="input" id="changePicture" type="file"/>

                        </form></a>
                    </div>
                    <div class="username">
                      <div class="name"><span class="verified"></span>{{current_user["first_name"] + ' ' + current_user["last_name"]}}</div>
                    </div>
                  </div>
                </div>
              </div>

                <div class="container-fluid">
                        <div class="wrapper">
                          <div class="span4" style="float: none; margin: 0 auto; width: 75%;">
                            <div class="card">
                              <div class="card-body">
                                <form id="profile_form" class="text-center border border-light p-5" action="/update_user_info" method="POST">

                                    <p class="h4 mb-4">Update Profile:</p>

                                    <div class="form-row mb-4">
                                        <div class="col">
                                            <input type="text" name="first_name" id="first_name" class="form-control" placeholder="{{ current_user['first_name'] }}">
                                        </div>
                                        <div class="col">
                                            <input type="text" name="last_name" id="last_name" class="form-control" placeholder="{{ current_user['last_name'] }}">
                                        </div>
                                        <div class="col">
                                            <input type="text" name="screen_name" id="screen_name" class="form-control" placeholder="{{ current_user['screen_name'] }}">
                                        </div>
                                    </div>
        
                                
                                    <input type="password" name="password" id="password" class="form-control" placeholder="Update Password" aria-describedby="defaultRegisterFormPasswordHelpBlock">
                                    <small id="defaultRegisterFormPasswordHelpBlock" class="form-text text-muted mb-4">
                                        At least 4 characters
                                    </small>
        
                                    <input type="password" name="password_confirm" id="password_confirm" class="form-control" placeholder="Confirm password" aria-describedby="defaultRegisterFormPasswordHelpBlock">
                                    {% with messages = get_flashed_messages() %}
                                        {% if messages %}
                                            {% for message in messages %}
                                                <small class="form-text text-danger mb-4">
                                                    {{ message }}
                                                </small>
                                            {% endfor %}
                                        {% endif %}
                                    {% endwith %}
                                    <button class="btn btn-danger my-4 btn-block" type="submit">Update</button>
                                    <a button class="btn btn-info my-2 btn-block" href="/dashboard">Cancel</a>

                                </form>
                              </div>
                            </div>
                          </div>
        

        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        
</body>
</html>